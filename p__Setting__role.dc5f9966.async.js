"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[266],{44721:function(ae,Z,r){var h=r(55443),t=r(75271),L=r(22800),i=r(60585),K=function(C,U){return t.createElement(i.Z,(0,h.Z)((0,h.Z)({},C),{},{ref:U,icon:L.Z}))},d=t.forwardRef(K);Z.Z=d},56012:function(ae,Z,r){var h=r(55443),t=r(38334),L=r(75271),i=r(36231),K=r(52676),d=["fieldProps","min","proFieldProps","max"],f=function(g,W){var O=g.fieldProps,E=g.min,$=g.proFieldProps,S=g.max,c=(0,t.Z)(g,d);return(0,K.jsx)(i.Z,(0,h.Z)({valueType:"digit",fieldProps:(0,h.Z)({min:E,max:S},O),ref:W,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:$},c))},C=L.forwardRef(f);Z.Z=C},27638:function(ae,Z,r){var h=r(55443),t=r(38334),L=r(81364),i=r(75271),K=r(93506),d=r(36231),f=r(52676),C=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],U=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],g=function(c,I){var N=c.fieldProps,m=c.children,o=c.params,D=c.proFieldProps,y=c.mode,l=c.valueEnum,k=c.request,F=c.showSearch,x=c.options,A=(0,t.Z)(c,C),G=(0,i.useContext)(K.Z);return(0,f.jsx)(d.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,L.h)(l),request:k,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:x,mode:y,showSearch:F,getPopupContainer:G.getPopupContainer},N),ref:I,proFieldProps:D},A),{},{children:m}))},W=i.forwardRef(function(S,c){var I=S.fieldProps,N=S.children,m=S.params,o=S.proFieldProps,D=S.mode,y=S.valueEnum,l=S.request,k=S.options,F=(0,t.Z)(S,U),x=(0,h.Z)({options:k,mode:D||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},I),A=(0,i.useContext)(K.Z);return(0,f.jsx)(d.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,L.h)(y),request:l,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:A.getPopupContainer},x),ref:c,proFieldProps:o},F),{},{children:N}))}),O=i.forwardRef(g),E=W,$=O;$.SearchSelect=E,$.displayName="ProFormComponent",Z.Z=$},70250:function(ae,Z,r){var h=r(52521),t=r(55443),L=r(38334),i=r(93954),K=r(76346),d=r(75962),f=r(18051),C=r(75271),U=r(36231),g=r(52676),W=["fieldProps","proFieldProps"],O=["fieldProps","proFieldProps"],E="text",$=function(m){var o=m.fieldProps,D=m.proFieldProps,y=(0,L.Z)(m,W);return(0,g.jsx)(U.Z,(0,t.Z)({valueType:E,fieldProps:o,filedConfig:{valueType:E},proFieldProps:D},y))},S=function(m){var o=(0,i.Z)(m.open||!1,{value:m.open,onChange:m.onOpenChange}),D=(0,h.Z)(o,2),y=D[0],l=D[1];return(0,g.jsx)(K.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(F){var x,A=F.getFieldValue(m.name||[]);return(0,g.jsx)(d.Z,(0,t.Z)((0,t.Z)({getPopupContainer:function(p){return p&&p.parentNode?p.parentNode:p},onOpenChange:function(p){return l(p)},content:(0,g.jsxs)("div",{style:{padding:"4px 0"},children:[(x=m.statusRender)===null||x===void 0?void 0:x.call(m,A),m.strengthText?(0,g.jsx)("div",{style:{marginTop:10},children:(0,g.jsx)("span",{children:m.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},m.popoverProps),{},{open:y,children:m.children}))}})},c=function(m){var o=m.fieldProps,D=m.proFieldProps,y=(0,L.Z)(m,O),l=(0,C.useState)(!1),k=(0,h.Z)(l,2),F=k[0],x=k[1];return o!=null&&o.statusRender&&y.name?(0,g.jsx)(S,{name:y.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:F,onOpenChange:x,children:(0,g.jsx)("div",{children:(0,g.jsx)(U.Z,(0,t.Z)({valueType:"password",fieldProps:(0,t.Z)((0,t.Z)({},(0,f.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(G){var p;o==null||(p=o.onBlur)===null||p===void 0||p.call(o,G),x(!1)},onClick:function(G){var p;o==null||(p=o.onClick)===null||p===void 0||p.call(o,G),x(!0)}}),proFieldProps:D,filedConfig:{valueType:E}},y))})}):(0,g.jsx)(U.Z,(0,t.Z)({valueType:"password",fieldProps:o,proFieldProps:D,filedConfig:{valueType:E}},y))},I=$;I.Password=c,I.displayName="ProFormComponent",Z.Z=I},50715:function(ae,Z,r){var h=r(66351);Z.ZP=h.Z},13800:function(ae,Z,r){r.r(Z),r.d(Z,{default:function(){return A}});var h=r(90228),t=r.n(h),L=r(26068),i=r.n(L),K=r(87999),d=r.n(K),f=r(48305),C=r.n(f),U=r(44721),g=r(78699),W=r(50715),O=r(70264),E=r(23158),$=r(87103),S=r(82773),c=r(75271),I=r(42192),N=r(56012),m=r(70250),o=r(27638),D=r(15401),y=r(85595),l=r(52676),k=function(p){var re=p.done,J=p.visible,z=p.current,ne=p.onDone,ie=p.onSubmit,Q=p.children,V=(0,O.useIntl)();if(!J)return null;var te=(0,c.useState)([]),se=C()(te,2),X=se[0],le=se[1],Y=(0,c.useState)([]),ue=C()(Y,2),q=ue[0],de=ue[1],H=(0,c.useState)([]),R=C()(H,2),ee=R[0],n=R[1],a=(0,c.useState)(!0),s=C()(a,2),_=s[0],e=s[1],j=function(P){var v=[];P&&(P.map(function(u){v.push(u.id)}),n(v))},w=function(){var M=d()(t()().mark(function P(){var v,u;return t()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,y.LW)({current:1,pageSize:1e3});case 2:v=oe.sent,u=v.data,de(u);case 5:case"end":return oe.stop()}},P)}));return function(){return M.apply(this,arguments)}}(),T=function(P){le(P),e(!0)},B=function M(P){return P.map(function(v){return v.children?{title:v.title,key:v.value,children:M(v.children)}:{title:v.title,key:v.value}})};(0,c.useEffect)(function(){w(),j(z==null?void 0:z.privileges)},[]);var b=function(P,v){n(P)};return(0,l.jsx)(I.Y,{visible:J,title:re?null:"".concat(z!=null&&z.id?V.formatMessage({id:"pages.edit"}):V.formatMessage({id:"pages.new"})),width:640,onFinish:function(){var M=d()(t()().mark(function P(v){return t()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:v.privilegeIds=ee,ie(v);case 2:case"end":return pe.stop()}},P)}));return function(P){return M.apply(this,arguments)}}(),initialValues:z,submitter:{render:function(P,v){return re?null:v}},trigger:(0,l.jsx)(l.Fragment,{children:Q}),modalProps:{onCancel:function(){return ne()},destroyOnClose:!0,bodyStyle:re?{padding:"72px 0"}:{}},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.Z,{name:"id",hidden:!0}),(0,l.jsx)(m.Z,{name:"name",label:V.formatMessage({id:"pages.role.name"}),width:"lg",rules:[{required:!0,message:V.formatMessage({id:"pages.role.name.required"})}],placeholder:V.formatMessage({id:"pages.role.name.placeholder"})}),(0,l.jsx)(o.Z,{label:V.formatMessage({id:"pages.role.group"}),placeholder:V.formatMessage({id:"pages.role.group.placeholder"}),name:"group",options:[{label:"\u7CFB\u7EDF\u7BA1\u7406\u5458",value:"SYSTEM_USER"},{label:"\u8FD0\u8425\u7BA1\u7406\u5458",value:"BUSINESS_USER"},{label:"\u7AD9\u70B9\u7BA1\u7406\u5458",value:"SITE_USER"},{label:"\u5DE1\u68C0\u7528\u6237",value:"CHECK_USER"},{label:"\u666E\u901A\u7528\u6237",value:"USER"}]}),(0,l.jsx)("label",{style:{padding:"10px 0"},children:" \u6743\u9650\u914D\u7F6E"}),(0,l.jsx)(D.Z,{checkable:!0,onExpand:T,expandedKeys:X,autoExpandParent:_,checkedKeys:ee,treeData:B(q),onCheck:b})]})})},F=k,x=function(){var p=(0,c.useRef)(),re=(0,c.useState)(void 0),J=C()(re,2),z=J[0],ne=J[1],ie=(0,c.useState)(!1),Q=C()(ie,2),V=Q[0],te=Q[1],se=(0,c.useState)(!1),X=C()(se,2),le=X[0],Y=X[1],ue=(0,c.useState)(),q=C()(ue,2),de=q[0],H=q[1],R=(0,O.useIntl)(),ee=function(){var e=d()(t()().mark(function j(w){var T,B,b,M,P;return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(T=E.ZP.loading(R.formatMessage({id:"pages.tip.loading"})),T(),u.prev=2,w.id==null){u.next=13;break}return u.next=6,(0,y.ul)(i()({},w));case 6:if(B=u.sent,b=B.success,!b){u.next=11;break}return E.ZP.success(R.formatMessage({id:"pages.tip.success"})),u.abrupt("return",!0);case 11:u.next=20;break;case 13:return u.next=15,(0,y._d)(i()({},w));case 15:if(M=u.sent,P=M.success,!P){u.next=20;break}return E.ZP.success(R.formatMessage({id:"pages.tip.success"})),u.abrupt("return",!0);case 20:return u.abrupt("return",!1);case 23:return u.prev=23,u.t0=u.catch(2),E.ZP.error(R.formatMessage({id:"pages.tip.error"})),u.abrupt("return",!1);case 27:case"end":return u.stop()}},j,null,[[2,23]])}));return function(w){return e.apply(this,arguments)}}(),n=function(j){$.Z.confirm({title:R.formatMessage({id:"pages.tip.title"}),content:R.formatMessage({id:"pages.tip.content"}),okText:R.formatMessage({id:"pages.tip.ok"}),cancelText:R.formatMessage({id:"pages.tip.cancel"}),onOk:function(){var w=d()(t()().mark(function B(){var b,M,P;return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(j){u.next=2;break}return u.abrupt("return",!0);case 2:return u.prev=2,b=E.ZP.loading(R.formatMessage({id:"pages.tip.loading"})),u.next=6,(0,y.l5)({id:j.id});case 6:if(M=u.sent,P=M.success,!P){u.next=13;break}return b(),E.ZP.success(R.formatMessage({id:"pages.tip.success"})),p.current&&p.current.reload(),u.abrupt("return",!0);case 13:return u.abrupt("return",!1);case 16:return u.prev=16,u.t0=u.catch(2),E.ZP.error(R.formatMessage({id:"pages.tip.error"})),u.abrupt("return",!1);case 20:case"end":return u.stop()}},B,null,[[2,16]])}));function T(){return w.apply(this,arguments)}return T}()})},a=function(){te(!1),Y(!1),H(void 0)},s={showSizeChanger:!0,showQuickJumper:!0},_=[{title:(0,l.jsx)(O.FormattedMessage,{id:"pages.role.name"}),dataIndex:"name",valueType:"text",hideInSearch:!0,hideInForm:!0,fieldProps:{precision:6}},{title:(0,l.jsx)(O.FormattedMessage,{id:"pages.role.group"}),dataIndex:"group",valueType:"text",hideInSearch:!0,hideInForm:!0,fieldProps:{precision:6}},{title:(0,l.jsx)(O.FormattedMessage,{id:"pages.option"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(j,w){return[(0,l.jsx)("a",{onClick:d()(t()().mark(function T(){var B,b,M;return t()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,y.cY)({id:w.id});case 2:B=v.sent,b=B.data,M=B.success,H(M?b:w),Y(!0);case 7:case"end":return v.stop()}},T)})),children:(0,l.jsx)(O.FormattedMessage,{id:"pages.edit"})},"edit"),(0,l.jsx)("a",{onClick:function(){n(w)},children:(0,l.jsx)(O.FormattedMessage,{id:"pages.delete"})},"delete")]}}];return(0,l.jsx)("div",{children:(0,l.jsxs)(g._z,{children:[(0,l.jsx)(W.ZP,{actionRef:p,pagination:s,rowKey:function(j){return j.id},params:z,search:!1,toolBarRender:function(){return[(0,l.jsxs)(S.ZP,{type:"primary",onClick:function(){Y(!0)},children:[(0,l.jsx)(U.Z,{})," ",(0,l.jsx)(O.FormattedMessage,{id:"pages.new"})]},"primary")]},request:y.zU,columns:_,onChange:function(j,w,T){if(T){T.order=T.order==="descend"?"DESC":"ASC";var B={sorter:T.order,filter:T.field};ne(B)}}}),(0,l.jsx)(F,{done:V,visible:le,current:de||{},onDone:a,onSubmit:function(){var e=d()(t()().mark(function j(w){var T;return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,ee(w);case 2:T=b.sent,T&&(Y(!1),H(void 0),p.current&&p.current.reload());case 4:case"end":return b.stop()}},j)}));return function(j){return e.apply(this,arguments)}}()})]})})},A=x},85595:function(ae,Z,r){r.d(Z,{Ag:function(){return ue},LW:function(){return $},Tb:function(){return g},Yj:function(){return O},ZD:function(){return C},_d:function(){return G},aI:function(){return ie},cY:function(){return x},d_:function(){return se},e5:function(){return o},l5:function(){return z},q5:function(){return N},qE:function(){return y},ul:function(){return re},xD:function(){return le},xd:function(){return R},zU:function(){return k}});var h=r(90228),t=r.n(h),L=r(26068),i=r.n(L),K=r(87999),d=r.n(K),f=r(70264);function C(n,a){return U.apply(this,arguments)}function U(){return U=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/siteconfig/get",i()({params:i()({},a),method:"POST"},s||{})));case 1:case"end":return e.stop()}},n)})),U.apply(this,arguments)}function g(n,a){return W.apply(this,arguments)}function W(){return W=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/siteconfig/update",i()({data:a,method:"PUT"},s||{})));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function O(n,a){return E.apply(this,arguments)}function E(){return E=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/privilege/list",i()({method:"POST",params:i()({},a)},s||{})));case 1:case"end":return e.stop()}},n)})),E.apply(this,arguments)}function $(n,a){return S.apply(this,arguments)}function S(){return S=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/privilege/parent",i()({method:"POST",params:i()({},a)},s||{})));case 1:case"end":return e.stop()}},n)})),S.apply(this,arguments)}function c(n,a){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/system/privilege/setting",_objectSpread({method:"POST",params:_objectSpread({},a)},s||{})));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function N(n,a){return m.apply(this,arguments)}function m(){return m=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/privilege/add",i()({data:a,method:"POST"},s||{})));case 1:case"end":return e.stop()}},n)})),m.apply(this,arguments)}function o(n,a){return D.apply(this,arguments)}function D(){return D=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/privilege/update",i()({data:a,method:"PUT"},s||{})));case 1:case"end":return e.stop()}},n)})),D.apply(this,arguments)}function y(n,a){return l.apply(this,arguments)}function l(){return l=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/privilege/delete",i()({data:a,method:"DELETE"},s||{})));case 1:case"end":return e.stop()}},n)})),l.apply(this,arguments)}function k(n,a){return F.apply(this,arguments)}function F(){return F=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/role/list",i()({method:"POST",params:i()({},a)},s||{})));case 1:case"end":return e.stop()}},n)})),F.apply(this,arguments)}function x(n,a){return A.apply(this,arguments)}function A(){return A=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/role/get",i()({params:i()({},a),method:"POST"},s||{})));case 1:case"end":return e.stop()}},n)})),A.apply(this,arguments)}function G(n,a){return p.apply(this,arguments)}function p(){return p=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/role/add",i()({data:a,method:"POST"},s||{})));case 1:case"end":return e.stop()}},n)})),p.apply(this,arguments)}function re(n,a){return J.apply(this,arguments)}function J(){return J=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/role/update",i()({data:a,method:"PUT"},s||{})));case 1:case"end":return e.stop()}},n)})),J.apply(this,arguments)}function z(n,a){return ne.apply(this,arguments)}function ne(){return ne=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/role/delete",i()({data:a,method:"DELETE"},s||{})));case 1:case"end":return e.stop()}},n)})),ne.apply(this,arguments)}function ie(n,a){return Q.apply(this,arguments)}function Q(){return Q=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/list",i()({method:"POST",params:i()({},a)},s||{})));case 1:case"end":return e.stop()}},n)})),Q.apply(this,arguments)}function V(n,a){return te.apply(this,arguments)}function te(){return te=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/system/get",_objectSpread({params:_objectSpread({},a),method:"POST"},s||{})));case 1:case"end":return e.stop()}},n)})),te.apply(this,arguments)}function se(n,a){return X.apply(this,arguments)}function X(){return X=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/add",i()({data:a,method:"POST"},s||{})));case 1:case"end":return e.stop()}},n)})),X.apply(this,arguments)}function le(n,a){return Y.apply(this,arguments)}function Y(){return Y=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/update",i()({data:a,method:"PUT"},s||{})));case 1:case"end":return e.stop()}},n)})),Y.apply(this,arguments)}function ue(n,a){return q.apply(this,arguments)}function q(){return q=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/delete",i()({data:a,method:"DELETE"},s||{})));case 1:case"end":return e.stop()}},n)})),q.apply(this,arguments)}function de(n,a){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/system/init_password",_objectSpread({data:a,method:"PUT"},s||{})));case 1:case"end":return e.stop()}},n)})),H.apply(this,arguments)}function R(n,a){return ee.apply(this,arguments)}function ee(){return ee=d()(t()().mark(function n(a,s){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("api/system/task/list",i()({method:"POST",params:i()({},a)},s||{})));case 1:case"end":return e.stop()}},n)})),ee.apply(this,arguments)}}}]);
