"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6],{41510:function(re,B,e){var C=e(55443),s=e(75271),F=e(75256),E=e(60585),U=function(O,j){return s.createElement(E.Z,(0,C.Z)((0,C.Z)({},O),{},{ref:j,icon:F.Z}))},T=s.forwardRef(U);B.Z=T},70250:function(re,B,e){var C=e(52521),s=e(55443),F=e(38334),E=e(93954),U=e(76346),T=e(75962),G=e(18051),O=e(75271),j=e(36231),g=e(52676),k=["fieldProps","proFieldProps"],q=["fieldProps","proFieldProps"],u="text",_=function(r){var n=r.fieldProps,x=r.proFieldProps,y=(0,F.Z)(r,k);return(0,g.jsx)(j.Z,(0,s.Z)({valueType:u,fieldProps:n,filedConfig:{valueType:u},proFieldProps:x},y))},ee=function(r){var n=(0,E.Z)(r.open||!1,{value:r.open,onChange:r.onOpenChange}),x=(0,C.Z)(n,2),y=x[0],K=x[1];return(0,g.jsx)(U.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var S,b=t.getFieldValue(r.name||[]);return(0,g.jsx)(T.Z,(0,s.Z)((0,s.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:function(a){return K(a)},content:(0,g.jsxs)("div",{style:{padding:"4px 0"},children:[(S=r.statusRender)===null||S===void 0?void 0:S.call(r,b),r.strengthText?(0,g.jsx)("div",{style:{marginTop:10},children:(0,g.jsx)("span",{children:r.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},r.popoverProps),{},{open:y,children:r.children}))}})},te=function(r){var n=r.fieldProps,x=r.proFieldProps,y=(0,F.Z)(r,q),K=(0,O.useState)(!1),N=(0,C.Z)(K,2),t=N[0],S=N[1];return n!=null&&n.statusRender&&y.name?(0,g.jsx)(ee,{name:y.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:t,onOpenChange:S,children:(0,g.jsx)("div",{children:(0,g.jsx)(j.Z,(0,s.Z)({valueType:"password",fieldProps:(0,s.Z)((0,s.Z)({},(0,G.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(M){var a;n==null||(a=n.onBlur)===null||a===void 0||a.call(n,M),S(!1)},onClick:function(M){var a;n==null||(a=n.onClick)===null||a===void 0||a.call(n,M),S(!0)}}),proFieldProps:x,filedConfig:{valueType:u}},y))})}):(0,g.jsx)(j.Z,(0,s.Z)({valueType:"password",fieldProps:n,proFieldProps:x,filedConfig:{valueType:u}},y))},W=_;W.Password=te,W.displayName="ProFormComponent",B.Z=W},97953:function(re,B,e){e.r(B),e.d(B,{default:function(){return pe}});var C=e(90228),s=e.n(C),F=e(26068),E=e.n(F),U=e(87999),T=e.n(U),G=e(48305),O=e.n(G),j=e(32653),g=e(49086),k=e(39081),q=e(41510),u=e(55443),_=e(38334),ee=e(37206),te=e(23735),W=e(82187),H=e.n(W),r=e(75271),n=e(66472),x=e(35576),y=e(80442),K=function(o){return(0,x.Z)((0,x.Z)({},o.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:o.colorTextSecondary,fontSize:o.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,x.Z)({},"".concat(o.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function N(l){return(0,y.Xj)("LoginForm",function(o){var v=(0,u.Z)((0,u.Z)({},o),{},{componentCls:".".concat(l)});return[K(v)]})}var t=e(52676),S=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function b(l){var o,v=l.logo,V=l.message,se=l.contentStyle,z=l.title,$=l.subTitle,X=l.actions,le=l.children,Q=l.containerStyle,D=l.otherStyle,f=(0,_.Z)(l,S),ne=(0,ee.YB)(),ie=f.submitter===!1?!1:(0,u.Z)((0,u.Z)({searchConfig:{submitText:ne.getMessage("loginForm.submitText","\u767B\u5F55")}},f.submitter),{},{submitButtonProps:(0,u.Z)({size:"large",style:{width:"100%"}},(o=f.submitter)===null||o===void 0?void 0:o.submitButtonProps),render:function(p,d){var h,L=d.pop();if(typeof(f==null||(h=f.submitter)===null||h===void 0?void 0:h.render)=="function"){var A,R;return f==null||(A=f.submitter)===null||A===void 0||(R=A.render)===null||R===void 0?void 0:R.call(A,p,d)}return L}}),Z=(0,r.useContext)(te.ZP.ConfigContext),Y=Z.getPrefixCls("pro-form-login"),w=N(Y),J=w.wrapSSR,I=w.hashId,i=function(p){return"".concat(Y,"-").concat(p," ").concat(I)},m=(0,r.useMemo)(function(){return v?typeof v=="string"?(0,t.jsx)("img",{src:v}):v:null},[v]);return J((0,t.jsxs)("div",{className:H()(i("container"),I),style:Q,children:[(0,t.jsxs)("div",{className:"".concat(i("top")," ").concat(I).trim(),children:[z||m?(0,t.jsxs)("div",{className:"".concat(i("header")),children:[m?(0,t.jsx)("span",{className:i("logo"),children:m}):null,z?(0,t.jsx)("span",{className:i("title"),children:z}):null]}):null,$?(0,t.jsx)("div",{className:i("desc"),children:$}):null]}),(0,t.jsxs)("div",{className:i("main"),style:(0,u.Z)({width:328},se),children:[(0,t.jsxs)(n.A,(0,u.Z)((0,u.Z)({isKeyPressSubmit:!0},f),{},{submitter:ie,children:[V,le]})),X?(0,t.jsx)("div",{className:i("main-other"),style:D,children:X}):null]})]}))}var M=e(70250),a=e(70264),ce=e(46960),ge=e(40437),ve=e(30967),ae=e(57472),fe=(0,ge.kc)(function(l){var o=l.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:o.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:o.borderRadius,":hover":{backgroundColor:o.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),oe=function(o){var v=o.content;return(0,t.jsx)(ce.Z,{style:{marginBottom:24},message:v,type:"error",showIcon:!0})},me=function(){var o=(0,r.useState)({}),v=O()(o,2),V=v[0],se=v[1],z=(0,r.useState)("account"),$=O()(z,2),X=$[0],le=$[1],Q=(0,a.useModel)("@@initialState"),D=Q.initialState,f=Q.setInitialState,ne=fe(),ie=ne.styles,Z=(0,a.useIntl)(),Y=function(){var i=T()(s()().mark(function m(){var P,p;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,D==null||(P=D.fetchUserInfo)===null||P===void 0?void 0:P.call(D);case 2:p=h.sent,console.log(p),p&&(0,ve.flushSync)(function(){f(function(L){return E()(E()({},L),{},{currentUser:p})})});case 5:case"end":return h.stop()}},m)}));return function(){return i.apply(this,arguments)}}(),w=function(){var i=T()(s()().mark(function m(P){var p,d,h,L,A,R,ue,de;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,p=(0,a.getLocale)(),P.lang=p,c.next=5,(0,g.x4)(E()({},P));case 5:if(d=c.sent,h=d.status,L=d.token,A=d.roleGroup,!h){c.next=19;break}return R=Z.formatMessage({id:"pages.login.success"}),ae.yw.success(R),localStorage.setItem("token",L),localStorage.setItem("roleGroup",A),c.next=16,Y();case 16:return ue=new URL(window.location.href).searchParams,a.history.push(ue.get("redirect")||"/"),c.abrupt("return");case 19:return c.abrupt("return");case 22:c.prev=22,c.t0=c.catch(0),de=Z.formatMessage({id:"pages.login.failure"}),ae.yw.error(de);case 26:case"end":return c.stop()}},m,null,[[0,22]])}));return function(P){return i.apply(this,arguments)}}(),J=V.status,I=V.type;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(b,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:"/icons/icon-128x128.png",title:"\u5C0F\u725BXNIU",subTitle:"\u5C0F\u725B\u6570\u5B57\u8D44\u4EA7\u91CF\u5316\u4EA4\u6613\u7CFB\u7EDF",initialValues:{autoLogin:!0},onFinish:function(){var i=T()(s()().mark(function m(P){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,w(P);case 2:case"end":return d.stop()}},m)}));return function(m){return i.apply(this,arguments)}}(),children:[J==="error"&&I==="account"&&(0,t.jsx)(oe,{content:Z.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),X==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(k.Z,{})},placeholder:Z.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,t.jsx)(a.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,t.jsx)(M.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(q.Z,{})},placeholder:Z.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,t.jsx)(a.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),J==="error"&&I==="mobile"&&(0,t.jsx)(oe,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"})]}),(0,t.jsx)(j.$_,{})]})},pe=me}}]);
